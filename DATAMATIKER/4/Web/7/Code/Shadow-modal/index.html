<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Shadow DOM Alert box</title>
    <style>
        .box {
            background-color: #EEE;
            border: 4px solid #CCC;
            margin: 30px;
            padding: 20px;
        }
    </style>
</head>

<body>
    <modal-button text="Click me" modaltext="These are not the droids you are looking for"></modal-button>
    <script>
        class ModalButton extends HTMLElement {
            constructor() {
                //always call super first
                super();
                //write all the elememet functionality here
                var shadow = this.attachShadow({ mode: "open" });
                //create the button
                var button = document.createElement("button");
                //take the attribute context from the new custom html tag
                var text = this.getAttribute("text");
                button.innerText = text;
                //take the modal text
                var modaltext = this.getAttribute("modaltext");
                //create the modal
                var modal = document.createElement("div");
                modal.setAttribute("class", "modal");
                modal.innerText = modaltext;
                //create the styling (local)
                var styletag = document.createElement("style");
                styletag.textContent = ".modal{padding:20px;border:1px solid #CCC;background-color:#EEE;" +
                    "z-index:999;display:none;width:300px;position:absolute;left:30px;top:30px}";
                //attaching the dom to the shadow root
                shadow.appendChild(styletag);
                shadow.appendChild(modal);
                shadow.appendChild(button);

                //event handlers
                button.addEventListener("click", function () {
                    if (modal.style.display == "block") {
                        modal.style.display = "none";
                    }
                    else {
                        modal.style.display = "block";
                    }
                });
            }
        }
        customElements.define("modal-button", ModalButton);
    </script>
</body>

</html>